<% articles_rendered = false %>
<% @section.page.children.each do |child| %>
  <% case child.data_type %>
  <% when "news" %>
    <%= render :partial => 'news',       :locals => {:section => @section}  if @section.news.any?%>
  <% when "events" %>
    <%= render :partial => 'calendar',   :locals => {:section => @section}  if @section.events.any? %>
  <% when "portfolio" %>
    <%= render :partial => 'portfolio',  :locals => {:section => @section}  if @section.portfolio_entries.any? %>
  <% else %>
    <%= render :partial => 'page',       :locals => {:section => @section}  unless articles_rendered %>
    <% articles_rendered = true %>
  <% end %>
<% end %>
