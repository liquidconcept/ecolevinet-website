<%= form_for [:admin, @news] do |f| -%>
  <%= render :partial => "/shared/admin/error_messages", :locals => {
    :object => @news,
    :include_object_name => true
  } %>

  <div class='field'>
    <%= f.label :titre -%>
    <%= f.text_field :titre, :class => 'larger widest'  -%>
  </div>

  <% if @news_sections.any? -%>
    <div class='field'>
      <h2>Sections</h2>
      <ul class="check_box_list">
        <% @news_sections.each do |section| -%>
          <li>
          <%= check_box_tag 'news[section_ids][]', section.id,
            @news.sections.include?(section),
            :id => (id="news_section_ids_#{section.id}") %>
            <%= label_tag 'news[section_ids][]', section.title,
              :class => 'stripped',
              :for => id %>
          </li>
        <% end -%>
      </ul>
    </div>
  <% end -%>


      <div class='field'>
        <div id='page-tabs' class='clearfix ui-tabs ui-widget ui-widget-content ui-corner-all'>
          <ul id='page_parts'>
            <% [:contenu].each_with_index do |part, part_index| %>
              <li class='ui-state-default<%= ' ui-state-active' if part_index == 0 %>'>
              <%= link_to part.to_s.titleize, "##{part}" %>
              </li>
            <% end %>
          </ul>

          <div id='page_part_editors'>
            <% [:contenu].each do |part| %>
              <div class='page_part' id='<%= part %>'>
                <%= f.text_area part, :rows => 20, :class => 'wymeditor widest' -%>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <div class='field'>
        <%= f.label :lien -%>
        <%= f.text_field :lien, :class => 'larger widest'  -%>
      </div>

      <div class='field'>
        <%= f.label :image -%>
        <%= render :partial => "/shared/admin/image_picker", :locals => {
          :f => f,
          :field => :image_id,
          :image => @news.image,
          :toggle_image_display => false
        } %>
      </div>

      <div class='field' id='hot'>
        <%= f.label "Actualité brûlante " -%>
        <%= f.check_box :hot%>
      </div>

      <div class='field' id='date_limite'>
        <%= f.label "Jusqu'au :" -%>
        <%= f.date_select :date_limite  -%>
      </div>

      <%= render :partial => "/shared/admin/form_actions",
        :locals => {
        :f => f,
        :continue_editing => false,
        :delete_title => t('delete', :scope => 'admin.news.news'),
        :delete_confirmation => t('message', :scope => 'shared.admin.delete', :title => @news.titre)
      } %>
    <% end -%>
    <% content_for :javascripts do %>
      <script>
        $(document).ready(function(){
          page_options.init(false, '', '');

          var $date_limite = $('#date_limite');
          var $hotc   = $('input:checkbox:checked#news_hot');
          var $hot    = $('input:checkbox#news_hot');
          if ($hotc.val() == undefined) {
            $('#date_limite').hide();
          };
          $hot.click(function(){
            $('#date_limite').toggle();
          });
        });
      </script>
    <% end %>
