<% articles_rendered = false %>
<% page.children.each do |child| %>
  <% case child.data_type %>
  <% when "news_items" %>
    <%= render :partial => 'news_items', :locals => {:section => page.section}  if page.section.news_items.any?%>
  <% when "events" %>
    <%= render :partial => 'calendar',   :locals => {:section => page.section}  if page.section.events.any? %>
  <% when "portfolio" %>
    <%= render :partial => 'portfolio',  :locals => {:section => page.section}  if page.section.portfolio_entries.any? %>
  <% else %>
    <%= render :partial => 'page',       :locals => {:section => page.section}  unless articles_rendered %>
    <% articles_rendered = true %>
  <% end %>
<% end %>
