<% articles_rendered = false %>
<% odd = true %>
<% page.children.each do |child| %>

  <% case child.data_type %>
  <% when "news" %>
    <% if page.section.news.any? %>
      <%= render :partial => 'news',       :locals => {:section => page.section, :odd => odd }   %>
      <% odd = !odd %>
    <% end %>
  <% when "events" %>
    <% if page.section.events.any? %>
      <%= render :partial => 'calendar',   :locals => {:section => page.section, :odd => odd }   %>
      <% odd = !odd %>
    <% end %>
  <% when "portfolio" %>
    <% if page.section.portfolio_entries.any? %>
      <%= render :partial => 'portfolio',  :locals => {:section => page.section, :odd => odd }   %>
      <% odd = !odd %>
    <% end %>
  <% else %>
    <% unless articles_rendered %>
      <%= render :partial => 'page',       :locals => {:section => page.section, :odd => odd }   %>
      <% articles_rendered = true %>
      <% odd = !odd %>
    <% end %>
  <% end %>
<% end %>
